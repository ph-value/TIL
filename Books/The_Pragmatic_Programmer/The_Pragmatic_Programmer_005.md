The Pragmatic Programmer 005
---

**TIL (Today I Learned) 날짜**
2022.03.26

**오늘 읽은 범위**
5장 구부러지거나 부러지거나

책에서 기억하고 싶은 내용을 써보세요.
---

- 오늘의 이야기 : **되돌릴 수 있는 의사 결정을 내리는 구체적인 방법**

- 결합도(코드 조각 간의 의존 정도) 줄이기
    - 높은 결합도는 변경의 적
    - 소프트웨어의 구조는 유연해야
    - 결합도가 낮은 코드가 바꾸기 쉽다
    - 결합의 증상을 놓치지 않도록 주의해야.
        -  관계없는 모듈이나 라이브러리 간의 희한한 의존 관계
        -  한 모듈의 ‘간단한’ 수정이 이와 관계없는 모듈을 통해 시스템 전역으로 퍼져 나가거나 시스템의 다른 곳에서 무언가를 깨뜨리는 경우
        - 개발자가 수정하는 부분이 시스템에 어떤 영향을 미칠지 몰라 코드의 수정을 두려워하는 경우
        - 변경 사항에 누가 영향을 받는지 파악하고 있는 사람이 없어서 결국 모든사람이 참석해야 하는 회의
    - (객체의 내부 상태를) 묻지 말고 말하라 Tell, Don’t Ask, TDA.
    - 데메테르 법칙
        - 메서드 호출을 엮지 말라.
        - 무언가에 접근할 때 “.”을 딱 하나만 쓰려고 노력해 보라.
        - 하지만 언어에 기본으로 포함된 라이브러리라면 아마 꽤 안정적일 것이고,  “.”을 객체에 줄줄이 엮는 식으로 써도 될 것이다.
    - 연쇄와 파이프라인
        - 파이프라인은 함수에서 함수로 데이터를 넘겨 가며 데이터를 변환한다.
        - 함수에서 반환하는 데이터는 반드시 다음 함수가 처리할 수 있는 형식이어야 한다.
    - 전역 데이터는 여러 가지 방법으로 코드의 결합도를 높인다. 
        - 싱글턴singleton도 전역 데이터다
        - 외부 리소스도 전역 데이터다
            - 해법은 반드시 이 리소스들을 여러분이 작성하는 코드로 모두 감싸는 것이다.
**- 결국은 모두 ETC**


- 실세계를 갖고 저글링하기
    - 이벤트를 관리하고 이벤트에 반응하는 4가지 전략
        - 1. 유한상태기계(Finite State Machine, FSM)
        - 2. 감시자(observer) 패턴
            - 감시 대상(observable) == 주제(subject)객체
            - 감시자는 자신이 관심 있는 이벤트를 감시 대상에 등록한다. 보통은 호출 될 함수의 참조도 등록할 때 함께 넘긴다. 
        - 3. 게시-구독(Publish-Subscribe, pubsub)
            - 감시자 패턴을 일반화 한 것 
            - 채널(Channel)로 연결과 게시자와 구독자
            - 감시자 패턴과는 다르게 게시자와 구 독자 사이의 통신은 여러분의 코드 밖에서 일어난다.
            - 추가적인 결합 없이 비동기 이벤트 처리를 구현하기에 아주 좋은 기술이다.
            - 애플리케이션이 작동하고 있는 도중에 작업이 가능.
            - 하지만 현재 어떤 일이 벌어지고 있는지 파악하기가 힘들다.
        - 4. 반응형프로그래밍과 스트림(Stream)
            - 이벤트 처리에 시간 차원이 추가 된 것.
            - 스트림은 이벤트를 일반적인 자료 구조처럼 다룰 수 있게 해 준다
    - 이벤트를 중심으로 공들여 만든 코드는 일직선으로 수행되는 코드보다 더 잘 반응하고 결합도가 더 낮다.


- 변환 프로그래밍
    - 함수 파이프라인
    - 프로그램이란 **입력을 출력으로** 바꾸는 것이라는 사고방식으로 돌아갈 필요가 있다.
    - 요구 사항을 달성하기 위해 필요한 것은 하나로 연결된 변환들뿐이다.
    - `Tip`상태를 쌓아 놓지 말고 전달하라.
    - 오류 처리? -> 변환 사이에 값을 절대 날것으로 넘기지 않는 것
        - 래퍼(wrapper)로 값을 넘겨라.


- 상속세
    - **상속도 일종의 결합이다.**
    - 타입을 정의하기 위해 상속을 사용하지 말라.
        - 인터페이스와 프로토콜 
            - 다형성은 인터페이스로 표현하는 것이 좋다.
        - 위임
        - 믹스인과 트레이트
            - 기존의 것과 새로운 것의 기능 집합을 합치는 것이다.
    - 상속이 답인 경우는 드물다.


- 설정
    - 세부사항을 완전히 코드 밖으로 
    - 애플리케이션이 출시된 이후 바뀔 수도 있는 값에 코드가 의존하고 있다면 그 값을 애플리케이션 외부에서 관리하라. 
    - 서비스형 설정(Configuration-As-A-Service)




오늘 읽은 소감은? 떠오르는 생각을 가볍게 적어보세요
---
객체 지향 프로그래밍 언어를 많이 사용한 개발자로써, 이번 챕터가 일깨워주는 가벼움이 와닿는다.
그래, 왜 그렇게 무겁게 코딩하고 의존도가 높을 수 밖에 없었는지에 대한 답답함이 생각 났다.
인터페이스를 활용하는 건 내가 잘 하고 있는 부분이다. 하기야 안드로이드에서는 인터페이스가 더 편해요.


dart에서 상속을 대신할 수 있는 mixin을 자주 쓰고 있는데 만나서 반가웠다.


