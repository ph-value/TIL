
# 빅데이터를 지탱하는 기술

### 일자
2023.09.05.화

### CHAPTER 4 빅데이터의 축적

### 책에서 기억하고 싶은 내용
- 객체 스토리지(object storage)
  - 객체 스토리지의 구조는 데이터양이 많을 때는 우수
  - 소량의 데이터에 대해서는 반대로 비효율적임에 주의가 필요.
  - 객체 스토리지에서의 파일 읽고 쓰기는 네트워크를 거쳐서 실행하기 때문.
- 작은 데이터는 적당히 모아서 하나의 큰 파일로 만듦으로써 효율을 높이는 데 도움이 된다.
#### 데이터 수집(data ingestion)
- 수집한 데이터를 가공하여 집계 효율이 좋은 분산 스토리지를 만드는 일련의 프로세스.
- 데이터 수집부터 구조화 데이터의 작성, 분산 스토리지에 대한 장기적인 저장 등이 포함된다.

#### 스트리밍형의 데이터 전송
- 지금 바로 생성되어 아직 어디에도 정장되지 않은 데이터는 그 자리에서 바로 전송하는 수밖에 없다.
- 웹 브라우저, 모바일 앱, 센서 기기 데이터 등
- 이러한 데이터 전송의 공통점: **메시지 배송(message delivery)**
  - **다수의 클라이언트**에서 **계속해서 작은 데이터가 전송**되는 것
- 웹 어플리케이션
  - 전송 효율 높이기 위해 서버상에서 일단 데이터를 축적해 놓고 나중에 모아서 전송.
  - 서버 상주형 로그 수집 소프트웨어가 사용 된다.
    - `Fluenthd`, `Logstash`

#### 메시지 배송 - 성능과 신뢰성
- 메시지 브로커(message broker)
  > 대량의 메시지를 안정적으로 받기 위해서는 빈번한 쓰기에도 견딜 수 있도록 성능이 매우 높고 필요에 따라 성능을 얼마든지 올릴 수 있는 스토리지가 필요하다. 분산 스토리지가 반드시 그런 성격을 가지고 있다고는 할 수 없기 때문에 빅데이터의 메시지 배송 시스템에서는 종종 데이터를 일시적으로 축적하는 중산층이 설치된다. 이것을 ‘메시지 브로커(message broker) ’라고 한다
  - 분산 스토리지에 직접 메시지를 기록하면 부하 제어가 어려워 성능 한계에 도달하기 쉽다.메시지 브로커가 일시적으로 데이터를 축적함으로써 분산 스토리지에 쓰는 속도를 안정화한다.
  - `Apache Kafka`, `Amazon Kinesis` 등
- 메시지 배송의 세가지 설계 방식
  - at most once
    - 메시지는 한번만 전송. 그러나 실패해서 사라질 가능성이 있다.
  - exactly once
    - 메시지는 손실되거나 중복 없이 한 번만 전달된다.
  - at least once
    - 메시지는 확실히 전달된다. 단, 같은 것이 여러번 전달될 가능성이 있다.

#### 시계열 데이터의 최적화
- 이벤트 시간(event time): 클라이언트 상에서 메시지가 생성된 시간 (분석에서 사용되는 시간)
- 프로세스 시간(process time): 서버가 처리하는 시간
- 이벤트 시간에 의한 집계의 효율화
1. 시계열 인덱스(time-series index)
   - ex) `Cassandra`
2. 조건절 푸쉬다운
- 이벤트 시간에 의한 분할
  - 테이블 파티셔닝
  - 시계열 테이블

### 읽은 내용에 대한 내 생각


### 기타 메모
